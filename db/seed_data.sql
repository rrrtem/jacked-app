-- ============================================
-- ТЕСТОВЫЕ ДАННЫЕ ДЛЯ РАЗРАБОТКИ
-- ============================================
-- Скрипт создаёт минимальный, но связанный набор данных
-- для демонстрации работы всех таблиц приложения.

-- ============================================
-- 0. ОЧИСТКА
-- ============================================
TRUNCATE TABLE 
  workout_sets_data,
  workout_session_exercises,
  workout_sessions,
  workout_set_exercises,
  workout_sets,
  exercise_record_history,
  exercise_records,
  exercises,
  users
RESTART IDENTITY CASCADE;

-- ============================================
-- 1. ПОЛЬЗОВАТЕЛИ
-- ============================================
INSERT INTO users (id, email, name, avatar_url)
VALUES (
  '00000000-0000-0000-0000-000000000001',
  'test@example.com',
  'Test User',
  'https://avatars.githubusercontent.com/u/00000000?v=4'
);

-- ============================================
-- 2. УПРАЖНЕНИЯ
-- ============================================
INSERT INTO exercises (id, name, instructions, tags)
VALUES
  ('00000000-0000-0000-0000-000000010001', 'Push-ups', 'Классические отжимания от пола. Держите корпус прямым и контролируйте движение.', ARRAY['push', 'chest', 'triceps', 'bodyweight']),
  ('00000000-0000-0000-0000-000000010002', 'Squats', 'Приседания с собственным весом. Опускайтесь до параллели или ниже, держите спину ровной.', ARRAY['legs', 'full-body', 'bodyweight']),
  ('00000000-0000-0000-0000-000000010003', 'Bench Press', 'Жим лёжа со штангой. Опускайте штангу к середине груди и контролируйте подъём.', ARRAY['push', 'chest', 'triceps', 'barbell']),
  ('00000000-0000-0000-0000-000000010004', 'Deadlift', 'Становая тяга. Держите поясницу ровной, поднимайте штангу мощным движением ног и спины.', ARRAY['pull', 'back', 'legs', 'barbell']),
  ('00000000-0000-0000-0000-000000010005', 'Overhead Press', 'Жим стоя. Выжимайте штангу над головой, контролируя корпус.', ARRAY['push', 'shoulders', 'triceps', 'barbell']),
  ('00000000-0000-0000-0000-000000010006', 'Plank', 'Планка на предплечьях. Держите корпус прямым, не поднимайте и не опускайте таз.', ARRAY['core', 'bodyweight']),
  ('00000000-0000-0000-0000-000000010007', 'Pull-ups', 'Подтягивания широким хватом. Подтягивайтесь до перекладины, удерживая корпус стабильным.', ARRAY['pull', 'back', 'biceps', 'bodyweight']);

-- ============================================
-- 3. ШАБЛОНЫ ТРЕНИРОВОК
-- ============================================
INSERT INTO workout_sets (id, user_id, name, description)
VALUES
  ('00000000-0000-0000-0000-000000020001', '00000000-0000-0000-0000-000000000001', 'Full Body Starter', 'Базовый шаблон на всё тело: сила + стабилизация.'),
  ('00000000-0000-0000-0000-000000020002', '00000000-0000-0000-0000-000000000001', 'Strength Focus', 'Силовая тренировка с базовыми штанговыми движениями.');

INSERT INTO workout_set_exercises (id, workout_set_id, exercise_id, order_index, target_sets, target_reps, target_weight, rest_duration)
VALUES
  ('00000000-0000-0000-0000-000000021001', '00000000-0000-0000-0000-000000020001', '00000000-0000-0000-0000-000000010001', 0, 3, 15, NULL, 60),
  ('00000000-0000-0000-0000-000000021002', '00000000-0000-0000-0000-000000020001', '00000000-0000-0000-0000-000000010002', 1, 3, 12, 70, 90),
  ('00000000-0000-0000-0000-000000021003', '00000000-0000-0000-0000-000000020001', '00000000-0000-0000-0000-000000010006', 2, 3, NULL, NULL, 45),
  ('00000000-0000-0000-0000-000000021004', '00000000-0000-0000-0000-000000020002', '00000000-0000-0000-0000-000000010003', 0, 4, 8, 90, 120),
  ('00000000-0000-0000-0000-000000021005', '00000000-0000-0000-0000-000000020002', '00000000-0000-0000-0000-000000010004', 1, 4, 6, 140, 150),
  ('00000000-0000-0000-0000-000000021006', '00000000-0000-0000-0000-000000020002', '00000000-0000-0000-0000-000000010005', 2, 3, 10, 55, 120),
  ('00000000-0000-0000-0000-000000021007', '00000000-0000-0000-0000-000000020002', '00000000-0000-0000-0000-000000010007', 3, 3, 10, NULL, 90);

-- ============================================
-- 4. СЕССИИ ТРЕНИРОВОК
-- ============================================
INSERT INTO workout_sessions (id, user_id, workout_set_id, started_at, completed_at, duration, notes)
VALUES
  (
    '00000000-0000-0000-0000-000000030001',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000020001',
    NOW() - INTERVAL '7 days',
    NOW() - INTERVAL '7 days' + INTERVAL '45 minutes',
    2700,
    'Сессия по шаблону Full Body Starter — делал акцент на качество техники.'
  ),
  (
    '00000000-0000-0000-0000-000000030002',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000020002',
    NOW() - INTERVAL '2 days',
    NOW() - INTERVAL '2 days' + INTERVAL '55 minutes',
    3300,
    'Силовая тренировка, добавил подходы на подтягивания для добора объёма.'
  );

INSERT INTO workout_session_exercises (id, workout_session_id, exercise_id, order_index, warmup_completed)
VALUES
  ('00000000-0000-0000-0000-000000031001', '00000000-0000-0000-0000-000000030001', '00000000-0000-0000-0000-000000010001', 0, TRUE),
  ('00000000-0000-0000-0000-000000031002', '00000000-0000-0000-0000-000000030001', '00000000-0000-0000-0000-000000010002', 1, TRUE),
  ('00000000-0000-0000-0000-000000031003', '00000000-0000-0000-0000-000000030001', '00000000-0000-0000-0000-000000010006', 2, FALSE),
  ('00000000-0000-0000-0000-000000031004', '00000000-0000-0000-0000-000000030002', '00000000-0000-0000-0000-000000010003', 0, TRUE),
  ('00000000-0000-0000-0000-000000031005', '00000000-0000-0000-0000-000000030002', '00000000-0000-0000-0000-000000010004', 1, TRUE),
  ('00000000-0000-0000-0000-000000031006', '00000000-0000-0000-0000-000000030002', '00000000-0000-0000-0000-000000010005', 2, TRUE),
  ('00000000-0000-0000-0000-000000031007', '00000000-0000-0000-0000-000000030002', '00000000-0000-0000-0000-000000010007', 3, TRUE);

INSERT INTO workout_sets_data (id, workout_session_exercise_id, set_number, weight, reps, duration, completed, notes)
VALUES
  ('00000000-0000-0000-0000-000000032001', '00000000-0000-0000-0000-000000031001', 1, NULL, 20, NULL, TRUE, 'Разминка'),
  ('00000000-0000-0000-0000-000000032002', '00000000-0000-0000-0000-000000031001', 2, NULL, 18, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032003', '00000000-0000-0000-0000-000000031001', 3, NULL, 16, NULL, TRUE, 'Последний подход дался тяжело'),
  ('00000000-0000-0000-0000-000000032004', '00000000-0000-0000-0000-000000031002', 1, 60, 12, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032005', '00000000-0000-0000-0000-000000031002', 2, 65, 10, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032006', '00000000-0000-0000-0000-000000031002', 3, 70, 8, NULL, TRUE, 'Добавил вес'),
  ('00000000-0000-0000-0000-000000032007', '00000000-0000-0000-0000-000000031003', 1, NULL, NULL, 60, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032008', '00000000-0000-0000-0000-000000031003', 2, NULL, NULL, 75, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032009', '00000000-0000-0000-0000-000000031003', 3, NULL, NULL, 90, TRUE, 'Держал корпус стабильно'),
  ('00000000-0000-0000-0000-000000032010', '00000000-0000-0000-0000-000000031004', 1, 60, 10, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032011', '00000000-0000-0000-0000-000000031004', 2, 70, 8, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032012', '00000000-0000-0000-0000-000000031004', 3, 80, 6, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032013', '00000000-0000-0000-0000-000000031004', 4, 80, 5, NULL, TRUE, 'Отказал на пятом повторе'),
  ('00000000-0000-0000-0000-000000032014', '00000000-0000-0000-0000-000000031005', 1, 100, 5, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032015', '00000000-0000-0000-0000-000000031005', 2, 110, 4, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032016', '00000000-0000-0000-0000-000000031005', 3, 120, 3, NULL, TRUE, 'Хорошая тяга'),
  ('00000000-0000-0000-0000-000000032017', '00000000-0000-0000-0000-000000031006', 1, 40, 10, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032018', '00000000-0000-0000-0000-000000031006', 2, 45, 8, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032019', '00000000-0000-0000-0000-000000031006', 3, 50, 6, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032020', '00000000-0000-0000-0000-000000031007', 1, NULL, 10, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032021', '00000000-0000-0000-0000-000000031007', 2, NULL, 8, NULL, TRUE, NULL),
  ('00000000-0000-0000-0000-000000032022', '00000000-0000-0000-0000-000000031007', 3, NULL, 7, NULL, TRUE, 'Добавил эластичную ленту');

-- ============================================
-- 5. ЛИЧНЫЕ РЕКОРДЫ
-- ============================================
INSERT INTO exercise_records (id, user_id, exercise_id, max_weight, max_reps, max_duration, last_updated)
VALUES
  ('00000000-0000-0000-0000-000000060001', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000010001', NULL, 40, NULL, NOW() - INTERVAL '10 days'),
  ('00000000-0000-0000-0000-000000060002', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000010002', 130, NULL, NULL, NOW() - INTERVAL '9 days'),
  ('00000000-0000-0000-0000-000000060003', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000010003', 95, NULL, NULL, NOW() - INTERVAL '2 days'),
  ('00000000-0000-0000-0000-000000060004', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000010004', 150, NULL, NULL, NOW() - INTERVAL '4 days'),
  ('00000000-0000-0000-0000-000000060005', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000010006', NULL, NULL, 210, NOW() - INTERVAL '6 days'),
  ('00000000-0000-0000-0000-000000060006', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000010007', NULL, 18, NULL, NOW() - INTERVAL '3 days');

-- ============================================
-- 6. ИСТОРИЯ ЛИЧНЫХ РЕКОРДОВ
-- ============================================
INSERT INTO exercise_record_history (id, user_id, exercise_id, workout_session_id, weight, reps, duration, achieved_at, notes)
VALUES
  (
    '00000000-0000-0000-0000-000000070001',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000010001',
    '00000000-0000-0000-0000-000000030001',
    NULL,
    20,
    NULL,
    NOW() - INTERVAL '7 days',
    'Держал устойчивый темп, ни одного незавершённого подхода.'
  ),
  (
    '00000000-0000-0000-0000-000000070002',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000010002',
    '00000000-0000-0000-0000-000000030001',
    70,
    8,
    NULL,
    NOW() - INTERVAL '7 days',
    'Поставил личный рекорд по весу в приседах.'
  ),
  (
    '00000000-0000-0000-0000-000000070003',
    '00000000-0000-0000-0000-000000000001',
    '00000000-0000-0000-0000-000000010003',
    '00000000-0000-0000-0000-000000030002',
    80,
    6,
    NULL,
    NOW() - INTERVAL '2 days',
    'Последовательные подходы на 80 кг без помощи.'
  );
