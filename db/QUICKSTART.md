# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## ‚ö° –ó–∞ 5 –º–∏–Ω—É—Ç

### –®–∞–≥ 1: –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –≤ Supabase (2 –º–∏–Ω—É—Ç—ã)

1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ [supabase.com](https://supabase.com)
2. –í–æ–π—Ç–∏ –∏–ª–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
3. –ù–∞–∂–∞—Ç—å **"New Project"**
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å:
   - Name: `Workout Tracker`
   - Password: –ø—Ä–∏–¥—É–º–∞—Ç—å –∏ **—Å–æ—Ö—Ä–∞–Ω–∏—Ç—å**
   - Region: –≤—ã–±—Ä–∞—Ç—å –±–ª–∏–∂–∞–π—à–∏–π
5. –ù–∞–∂–∞—Ç—å **"Create new project"**
6. –ü–æ–¥–æ–∂–¥–∞—Ç—å 1-2 –º–∏–Ω—É—Ç—ã

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL-—Å–∫—Ä–∏–ø—Ç (1 –º–∏–Ω—É—Ç–∞)

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–∞—Ç—å **"SQL Editor"**
2. –ù–∞–∂–∞—Ç—å **"New query"**
3. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª `supabase_schema.sql`
4. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å **–≤–µ—Å—å** –∫–æ–¥ (Ctrl+A, Ctrl+C)
5. –í—Å—Ç–∞–≤–∏—Ç—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä (Ctrl+V)
6. –ù–∞–∂–∞—Ç—å **"Run"** (–∏–ª–∏ Ctrl+Enter)
7. –î–æ–∂–¥–∞—Ç—å—Å—è "Success. No rows returned"

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∞–±–ª–∏—Ü—ã (30 —Å–µ–∫—É–Ω–¥)

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–∞—Ç—å **"Table Editor"**
2. –£–≤–∏–¥–∏—Ç–µ 8 —Ç–∞–±–ª–∏—Ü:
   - `users`
   - `exercises` (10 –∑–∞–ø–∏—Å–µ–π)
   - `exercise_records`
   - `workout_sets` (1 –∑–∞–ø–∏—Å—å)
   - `workout_set_exercises`
   - `workout_sessions`
   - `workout_session_exercises`
   - `workout_sets_data`

### –®–∞–≥ 4: –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á–∏ (1 –º–∏–Ω—É—Ç–∞)

1. –í –±–æ–∫–æ–≤–æ–º –º–µ–Ω—é –Ω–∞–∂–∞—Ç—å **"Settings"** (—à–µ—Å—Ç–µ—Ä–µ–Ω–∫–∞ –≤–Ω–∏–∑—É)
2. –í—ã–±—Ä–∞—Ç—å **"API"**
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:
   - **Project URL** (–Ω–∞–ø—Ä–∏–º–µ—Ä: `https://abc123.supabase.co`)
   - **anon public** –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `eyJ...`)

### –®–∞–≥ 5: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (1 –º–∏–Ω—É—Ç–∞)

–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª `.env.local` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
NEXT_PUBLIC_SUPABASE_URL=https://abc123.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ey...
```

–ó–∞–º–µ–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞ —Å–≤–æ–∏ –∏–∑ —à–∞–≥–∞ 4.

---

## ‚úÖ –ì–æ—Ç–æ–≤–æ!

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

### –ß—Ç–æ –¥–∞–ª—å—à–µ?

#### –û–ø—Ü–∏—è 1: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–î–ª—è —É–¥–æ–±–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `seed_data.sql`:

1. –û—Ç–∫—Ä—ã—Ç—å **SQL Editor** –≤ Supabase
2. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –∫–æ–¥ –∏–∑ `seed_data.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç—å (Run)
4. –ü–æ–ª—É—á–∏—Ç–µ:
   - 23 –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
   - 5 –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
   - 12 —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü
   - –õ–∏—á–Ω—ã–µ —Ä–µ–∫–æ—Ä–¥—ã

#### –û–ø—Ü–∏—è 2: –ù–∞—á–∞—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–¥–µ

```typescript
// –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
import { getAllExercises } from '@/lib/supabase/queries'

const exercises = await getAllExercises()
console.log(exercises) // => –º–∞—Å—Å–∏–≤ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
```

```typescript
// –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
import { createWorkoutSession } from '@/lib/supabase/queries'

const session = await createWorkoutSession(userId, {
  exercises: [
    { exercise_id: 'exercise-uuid', order_index: 0 },
    { exercise_id: 'exercise-uuid-2', order_index: 1 }
  ]
})
```

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| –§–∞–π–ª | –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|------|-------------------|
| **`DATABASE_SUMMARY.md`** | –ö—Ä–∞—Ç–∫–∏–π –æ–±–∑–æ—Ä –≤—Å–µ–π —Å–∏—Å—Ç–µ–º—ã –ë–î |
| **`SUPABASE_SETUP.md`** | –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ |
| **`DATABASE_SCHEMA.md`** | –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü |
| **`API_REFERENCE.md`** | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º |
| **`DATABASE_DIAGRAM.md`** | –í–∏–∑—É–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ —Å–≤—è–∑–µ–π |
| **`MIGRATIONS.md`** | –ö–∞–∫ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ –ø–æ–ª—è/—Ç–∞–±–ª–∏—Ü—ã |

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞: "relation does not exist"

**–ü—Ä–æ–±–ª–µ–º–∞:** –¢–∞–±–ª–∏—Ü—ã –Ω–µ —Å–æ–∑–¥–∞–Ω—ã.

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ SQL Editor
2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `supabase_schema.sql` –∑–∞–Ω–æ–≤–æ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Table Editor

### –û—à–∏–±–∫–∞: "Invalid API key"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env.local`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–ª—é—á–∏
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä (`pnpm dev`)

### –û—à–∏–±–∫–∞: "JWT expired"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ò—Å—Ç—ë–∫ —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
1. –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –Ω–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è.

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è `.env.local` (–Ω–µ `.env`)
2. –§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä

---

## üéØ –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ

```typescript
// app/exercises/page.tsx
import { getAllExercises } from '@/lib/supabase/queries'

export default async function ExercisesPage() {
  const exercises = await getAllExercises()
  
  return (
    <div>
      <h1>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</h1>
      {exercises.map(ex => (
        <div key={ex.id}>
          <h2>{ex.name}</h2>
          <p>{ex.instructions}</p>
          <div>–¢–µ–≥–∏: {ex.tags.join(', ')}</div>
        </div>
      ))}
    </div>
  )
}
```

### 2. –°–æ–∑–¥–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É

```typescript
'use client'

import { useState } from 'react'
import { createWorkoutSession } from '@/lib/supabase/queries'
import { useRouter } from 'next/navigation'

export default function StartWorkoutButton({ 
  userId, 
  exerciseIds 
}: { 
  userId: string
  exerciseIds: string[] 
}) {
  const [loading, setLoading] = useState(false)
  const router = useRouter()
  
  async function handleStart() {
    setLoading(true)
    try {
      const session = await createWorkoutSession(userId, {
        exercises: exerciseIds.map((id, idx) => ({
          exercise_id: id,
          order_index: idx
        }))
      })
      router.push(`/workout/${session.id}`)
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:', error)
    } finally {
      setLoading(false)
    }
  }
  
  return (
    <button onClick={handleStart} disabled={loading}>
      {loading ? '–°–æ–∑–¥–∞—ë–º...' : '–ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É'}
    </button>
  )
}
```

### 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥—Ö–æ–¥ –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏

```typescript
'use client'

import { saveWorkoutSet } from '@/lib/supabase/queries'

export default function SaveSetButton({ 
  workoutSessionExerciseId,
  setNumber,
  weight,
  reps
}: {
  workoutSessionExerciseId: string
  setNumber: number
  weight: number
  reps: number
}) {
  async function handleSave() {
    try {
      await saveWorkoutSet({
        workout_session_exercise_id: workoutSessionExerciseId,
        set_number: setNumber,
        weight,
        reps,
        completed: true
      })
      console.log('–ü–æ–¥—Ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!')
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è:', error)
    }
  }
  
  return (
    <button onClick={handleSave}>
      –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥—Ö–æ–¥ {setNumber}
    </button>
  )
}
```

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
2. ‚¨ú –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
3. ‚¨ú –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
4. ‚¨ú –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
5. ‚¨ú –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å flow —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
6. ‚¨ú –î–æ–±–∞–≤–∏—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∏—Å—Ç–æ—Ä–∏–∏
7. ‚¨ú –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è

TypeScript —Ç–∏–ø—ã —É–∂–µ —Å–æ–∑–¥–∞–Ω—ã –≤ `lib/types/database.ts`. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è:

```typescript
import type { Exercise, WorkoutSession } from '@/lib/types/database'

const exercise: Exercise = {
  id: '...',
  name: 'Push-ups',
  instructions: '...',
  tags: ['push', 'chest'],
  created_at: '...',
  updated_at: '...'
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–±—Ä–æ—Å–∏—Ç—å –æ—à–∏–±–∫—É. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ try-catch:

```typescript
try {
  const exercises = await getAllExercises()
  // –†–∞–±–æ—Ç–∞–µ–º —Å –¥–∞–Ω–Ω—ã–º–∏
} catch (error) {
  console.error('–û—à–∏–±–∫–∞:', error)
  // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
}
```

### –î–µ–±–∞–≥ –∑–∞–ø—Ä–æ—Å–æ–≤

–ß—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã –≤ –∫–æ–Ω—Å–æ–ª–∏:

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Logs** ‚Üí **API**
3. –í–∏–¥–∏—Ç–µ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

---

## ‚ùì FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Ä—É—á–Ω—É—é?**

A: –ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å–æ–∑–¥–∞–Ω. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ Supabase Auth.

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ö–µ–º—É –ë–î –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è?**

A: –î–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏–∑ `MIGRATIONS.md`.

**Q: –ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö?**

A: –í—ã–ø–æ–ª–Ω–∏—Ç–µ `TRUNCATE` –∫–æ–º–∞–Ω–¥—ã –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç.

**Q: –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è?**

A: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Supabase Storage (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ).

---

–í—Å—ë –≥–æ—Ç–æ–≤–æ! –ù–∞—á–∏–Ω–∞–π—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É! üéâ

