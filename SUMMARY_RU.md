# ‚úÖ –ì–æ—Ç–æ–≤–æ! AI Suggest V2 - –ü–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–¥–µ–ª–∞–Ω–∞ —Å **rule-based** –Ω–∞ **LLM-powered** (Google Gemini).

### ‚ùå –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞
- –ñ–µ—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ –≤—ã–±–æ—Ä–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ —Ç–∞–±–∞
- –ù–µ—Ç –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è

### ‚úÖ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞
- **AI-powered**: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Google Gemini –¥–ª—è —É–º–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
- **–†—É—á–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —è–≤–Ω–æ –Ω–∞–∂–∏–º–∞–µ—Ç "Generate"
- **–î–µ—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è**: AI –æ–±—ä—è—Å–Ω—è–µ—Ç –∫–∞–∂–¥—É—é —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
- **–ì–ª—É–±–æ–∫–∞—è –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: 
  - –ò—Å—Ç–æ—Ä–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ (2 –Ω–µ–¥–µ–ª–∏)
  - –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è (—Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î)
  - –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç (—Ü–µ–ª–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è)
  - –í—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è

## üì¶ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend
1. **`lib/ai-suggest/llm-providers.ts`** - –°–∏—Å—Ç–µ–º–∞ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (–ª–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –º–µ–∂–¥—É Gemini/OpenAI/Claude)
2. **`lib/ai-suggest/prompt-builder.ts`** - –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤ —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
3. **`lib/ai-suggest/llm-generator.ts`** - –õ–æ–≥–∏–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
4. **`app/api/ai-generate-workout/route.ts`** - API endpoint

### Frontend
5. **`app/start/page.tsx`** - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π UI:
   - –§–æ—Ä–º–∞ —Å –ø–æ–ª–µ–º –¥–ª—è —Ü–µ–ª–µ–π
   - –ö–Ω–æ–ø–∫–∞ "Generate"
   - –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è preferences
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ AI reasoning
   - –ö–Ω–æ–ø–∫–∞ "Regenerate"

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
6. **`lib/ai-suggest/LLM_GENERATION_SETUP.md`** - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
7. **`ENV_SETUP_INSTRUCTIONS.md`** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
8. **`AI_SUGGEST_V2_COMPLETE.md`** - –î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
9. **`QUICK_START_AI_WORKOUT.md`** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
10. **`SUMMARY_RU.md`** - –≠—Ç–æ —Ä–µ–∑—é–º–µ

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ü–æ–ª—É—á–∏—Ç–µ API –∫–ª—é—á
1. –ò–¥–∏—Ç–µ –Ω–∞ https://makersuite.google.com/app/apikey
2. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Google
3. –°–æ–∑–¥–∞–π—Ç–µ API –∫–ª—é—á
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –µ–≥–æ

### 2. –î–æ–±–∞–≤—å—Ç–µ –≤ .env.local
```bash
NEXT_PUBLIC_GEMINI_API_KEY=–≤–∞—à_–∫–ª—é—á_–∑–¥–µ—Å—å
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä
```bash
pnpm dev
```

### 4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/start`
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ "‚ú® ai suggested"
3. –í–≤–µ–¥–∏—Ç–µ —Ü–µ–ª–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
4. –ù–∞–∂–º–∏—Ç–µ "generate workout"
5. –ü–æ–ª—É—á–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É!

## üé® UI Flow

```
1. User opens /start
   ‚Üì
2. Clicks "‚ú® ai suggested" tab
   ‚Üì
3. Sees generation form:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ what are your goals for       ‚îÇ
   ‚îÇ today's workout?              ‚îÇ
   ‚îÇ [textarea for context]        ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚îÇ permanent preferences [edit]  ‚îÇ
   ‚îÇ [shows saved preferences]     ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚îÇ [‚ú® generate workout button]  ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
4. Clicks "edit" (optional)
   ‚Üí Opens modal to set permanent preferences
   ‚Üí Saves to database
   ‚Üì
5. Clicks "generate workout"
   ‚Üí Shows loading state
   ‚Üí Calls /api/ai-generate-workout
   ‚Üí Backend gathers all context
   ‚Üí Sends to Gemini
   ‚Üí Returns structured JSON
   ‚Üì
6. Shows results:
   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
   ‚îÇ üìù AI Recommendation           ‚îÇ
   ‚îÇ [detailed explanation]         ‚îÇ
   ‚îÇ                     [regenerate]‚îÇ
   ‚îÇ                               ‚îÇ
   ‚îÇ warm up               10:00   ‚îÇ
   ‚îÇ Bench Press                   ‚îÇ
   ‚îÇ Overhead Press                ‚îÇ
   ‚îÇ Pull-ups                      ‚îÇ
   ‚îÇ                               ‚îÇ
   ‚îÇ + add exercise                ‚îÇ
   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
   ‚Üì
7. Clicks "start" ‚Üí begins workout
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### LLM Provider System
```typescript
// –õ–µ–≥–∫–æ –º–µ–Ω—è–µ—Ç—Å—è –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
export function createLLMClient(
  provider: 'google-gemini' | 'openai' | 'anthropic',
  config: LLMProviderConfig
): LLMClient

// –¢–µ–∫—É—â–∏–π default
export function getDefaultLLMClient(): LLMClient {
  return createLLMClient('google-gemini', {
    apiKey: process.env.NEXT_PUBLIC_GEMINI_API_KEY
  })
}
```

### Prompt Builder
–°–æ–±–∏—Ä–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç:
```typescript
{
  workoutHistory: [/* last 2 weeks */],
  userPreferences: "focus on strength...",
  localContext: "feeling tired today",
  availableExercises: [/* all from DB */]
}
```

–°—Ç—Ä–æ–∏—Ç –ø—Ä–æ–º–ø—Ç —Å:
- System message (—Ä–æ–ª—å AI —Ç—Ä–µ–Ω–µ—Ä–∞)
- –ò—Å—Ç–æ—Ä–∏—è —Å –¥–µ—Ç–∞–ª—è–º–∏ (—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è, —Å–µ—Ç—ã, –ø–æ–≤—Ç–æ—Ä—ã, –≤–µ—Å–∞)
- Preferences –∏ context
- –í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º–∏
- JSON schema –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞

### API Response
```json
{
  "success": true,
  "data": {
    "exercises": [
      {
        "exerciseId": "uuid",
        "name": "Bench Press",
        "reasoning": "Your chest has recovered...",
        "suggestedSets": 4,
        "suggestedReps": "5",
        "suggestedRestSeconds": 180
      }
    ],
    "overallReasoning": "Today's workout focuses on..."
  }
}
```

## üí∞ –°—Ç–æ–∏–º–æ—Å—Ç—å

### Google Gemini (—Ç–µ–∫—É—â–∏–π)
- **Free Tier**: $0
- **–õ–∏–º–∏—Ç—ã**: 
  - 15 –∑–∞–ø—Ä–æ—Å–æ–≤/–º–∏–Ω—É—Ç—É
  - 1,500 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å
  - 1,000,000 —Ç–æ–∫–µ–Ω–æ–≤/–º–∏–Ω—É—Ç—É
- **–°—Ä–µ–¥–Ω–∏–π –∑–∞–ø—Ä–æ—Å**: ~2K —Ç–æ–∫–µ–Ω–æ–≤
- **–ò—Ç–æ–≥–æ**: –ë–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –ª–∏—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- **OpenAI GPT-4**: ~$0.06 –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
- **Anthropic Claude**: ~$0.05 –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é

## üîÑ –ö–∞–∫ —Å–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### –ù–∞ OpenAI
1. –î–æ–±–∞–≤—å—Ç–µ –≤ `.env.local`:
   ```bash
   NEXT_PUBLIC_OPENAI_API_KEY=your_key
   ```

2. –ò–∑–º–µ–Ω–∏—Ç–µ –≤ `llm-providers.ts`:
   ```typescript
   export function getDefaultLLMClient(): LLMClient {
     return createLLMClient('openai', {
       apiKey: process.env.NEXT_PUBLIC_OPENAI_API_KEY
     })
   }
   ```

3. –†–µ–∞–ª–∏–∑—É–π—Ç–µ `OpenAIClient` (—Å–µ–π—á–∞—Å placeholder)

### –ù–∞ Anthropic Claude
–ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ OpenAI

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü–æ–ª–µ preferences —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
```sql
-- –í —Ç–∞–±–ª–∏—Ü–µ users
training_preferences TEXT DEFAULT NULL
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

- [x] LLM provider system
- [x] Prompt builder —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- [x] API endpoint —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- [x] UI —Ñ–æ—Ä–º–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- [x] –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ preferences
- [x] –ó–∞–≥—Ä—É–∑–∫–∞/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ preferences
- [x] –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ AI reasoning
- [x] –§—É–Ω–∫—Ü–∏—è regenerate
- [x] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- [x] Loading states
- [x] TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- [x] –õ–∏–Ω—Ç–µ—Ä —á–∏—Å—Ç
- [x] –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéâ –°—Ç–∞—Ç—É—Å

**‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–û**

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é. –ù—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–æ–±–∞–≤–∏—Ç—å API –∫–ª—é—á Google Gemini –≤ `.env.local`.

## üö¶ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á** - https://makersuite.google.com/app/apikey
2. **–î–æ–±–∞–≤–∏—Ç—å –≤ .env.local** - `NEXT_PUBLIC_GEMINI_API_KEY=...`
3. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** - `pnpm dev`
4. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å** - `/start` ‚Üí "‚ú® ai suggested" ‚Üí Generate

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–±—É–¥—É—â–µ–µ)

### –ö–æ—Ä–æ—Ç–∫–∏–π —Å—Ä–æ–∫
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ö–æ–∂–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- Feedback loop (–æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π)
- –í–∞—Ä–∏–∞—Ü–∏–∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π

### –î–æ–ª–≥–∏–π —Å—Ä–æ–∫
- Fine-tuning –Ω–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Multi-modal (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π)
- –ì–æ–ª–æ—Å–æ–≤–æ–π –≤–≤–æ–¥
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ browser console (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ server logs (—Ç–µ—Ä–º–∏–Ω–∞–ª)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤–∞–ª–∏–¥–µ–Ω
4. –ß–∏—Ç–∞–π—Ç–µ `QUICK_START_AI_WORKOUT.md`

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ**

