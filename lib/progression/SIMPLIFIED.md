# Упрощение системы прогрессии весов

## Что было изменено

### Проблема
Предыдущая система была слишком сложной:
- Запутанные проценты (40%, 60%, 80%, 100%)
- Множество конфигураций и вариантов
- Сложно понять, какой вес будет предложен
- Слишком много подходов для новичков

### Решение
Создана простая и понятная система:
- **Фиксированные шаги:** +10 кг для подводки, +2.5 кг для прогрессии
- **Адаптивная логика:** автоматически подстраивается под вес
- **Предсказуемость:** легко понять, что будет в следующем подходе

## Новая логика

### Алгоритм

1. **Подход 1:** Пустой гриф (20 кг) × 10 повторений - разминка
2. **Подводящие подходы:** Шаги по +10 кг до рабочего веса
   - Легкие веса (до 60 кг): 1-2 подхода
   - Средние веса (60-100 кг): 2-3 подхода
   - Тяжелые веса (100+ кг): больше подходов
3. **Рабочий подход:** Максимальный вес из истории × рабочие повторения
4. **Прогрессия:** Рабочий вес + 2.5 кг × рабочие повторения

### Примеры

**40 кг (новичок):**
```
1. 20 кг × 10 (разминка)
2. 30 кг × 10 (подводка)
3. 40 кг × 5  (рабочий)
4. 42.5 кг × 5 (прогрессия)
```
**Итого: 4 подхода** ✅

**60 кг (оптимально):**
```
1. 20 кг × 10 (разминка)
2. 30 кг × 10 (подводка)
3. 40 кг × 10 (подводка)
4. 50 кг × 10 (подводка)
5. 60 кг × 5  (рабочий)
6. 62.5 кг × 5 (прогрессия)
```
**Итого: 6 подходов** ✅

**100 кг (продвинутый):**
```
1-8. 20→30→40→50→60→70→80→90 кг (подводка)
9.  100 кг × 5   (рабочий)
10. 102.5 кг × 5 (прогрессия)
```
**Итого: 10 подходов** ✅

## Изменения в коде

### Файлы изменены:
- `lib/progression/linear-load.ts` - полностью переписана логика
- `lib/progression/README.md` - обновлена документация
- `lib/progression/examples.ts` - обновлены примеры

### Ключевые функции:

**calculateWarmupSteps()**
- Рассчитывает подводящие подходы
- Адаптируется под вес (легкий/средний/тяжелый)
- Ограничивает количество подводящих подходов

**calculateLinearLoadSuggestion()**
- Возвращает suggestion для конкретного подхода
- Использует историю тренировок (max_weight, max_reps)
- Добавляет +2.5 кг для прогрессии

## Преимущества новой системы

✅ **Простота** - понятно даже новичку
✅ **Предсказуемость** - легко планировать тренировку
✅ **Адаптивность** - подстраивается под уровень
✅ **Безопасность** - достаточно разминки для тяжелых весов
✅ **Прогрессия** - автоматическое увеличение на +2.5 кг

## Тестирование

Все тесты пройдены успешно:
- ✅ Легкие веса (30-50 кг)
- ✅ Средние веса (60-80 кг)
- ✅ Тяжелые веса (100+ кг)
- ✅ Очень тяжелые веса (140+ кг)
- ✅ Первая тренировка (без истории)
- ✅ Типизация TypeScript
- ✅ Production build

## Использование

```typescript
import { calculateSetSuggestion } from '@/lib/progression'

const suggestion = calculateSetSuggestion({
  exerciseId: 'bench-press',
  exerciseType: 'weight',
  setNumber: 5,
  record: { max_weight: 60, max_reps: 5 }
})

// { weight: 60, reps: 5, note: 'Working set' }
```

## Что дальше

Система готова к использованию! Теперь вы можете:
1. Начинать тренировки с понятной прогрессией
2. Постепенно увеличивать веса (+2.5 кг каждую тренировку)
3. Получать оптимальное количество подводящих подходов
4. Безопасно работать с любыми весами

По мере роста весов система автоматически добавит больше подводящих подходов для безопасности!

