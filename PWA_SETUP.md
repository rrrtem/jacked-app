# üì± PWA & Screen Wake Lock Setup Complete

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **PWA (Progressive Web App) - Standalone —Ä–µ–∂–∏–º**

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ iOS!

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞:
- ‚úÖ `manifest.json` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PWA
- ‚úÖ Meta-—Ç–µ–≥–∏ –¥–ª—è Apple (`apple-touch-icon`, `apple-mobile-web-app-capable`)
- ‚úÖ `display: "standalone"` - –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ë–ï–ó –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π —Å—Ç—Ä–æ–∫–∏
- ‚úÖ –ß–µ—Ä–Ω–∞—è —Ç–µ–º–∞ –¥–ª—è —Å—Ç–∞—Ç—É—Å-–±–∞—Ä–∞ iOS

#### –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å:
1. –û—Ç–∫—Ä–æ–π —Å–∞–π—Ç –≤ **Safari –Ω–∞ iPhone**
2. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" (–∫–≤–∞–¥—Ä–∞—Ç —Å–æ —Å—Ç—Ä–µ–ª–∫–æ–π –≤–≤–µ—Ä—Ö)
3. –ü—Ä–æ–∫—Ä—É—Ç–∏ –≤–Ω–∏–∑ ‚Üí **"–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª"**
4. –ù–∞–∂–º–∏ "–î–æ–±–∞–≤–∏—Ç—å"
5. –ò–∫–æ–Ω–∫–∞ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ
6. **–û—Ç–∫—Ä—ã–≤–∞–π –¢–û–õ–¨–ö–û —á–µ—Ä–µ–∑ —ç—Ç—É –∏–∫–æ–Ω–∫—É!** (–Ω–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä)

‚û°Ô∏è –¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ fullscreen (–±–µ–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ Safari)

---

### 2. **Screen Wake Lock - –≠–∫—Ä–∞–Ω –Ω–µ –≥–∞—Å–Ω–µ—Ç**

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ **–î–í–ê** –º–µ—Ç–æ–¥–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –≥–∞—à–µ–Ω–∏—è —ç–∫—Ä–∞–Ω–∞:

#### –ú–µ—Ç–æ–¥ A: –ù–µ–≤–∏–¥–∏–º–æ–µ –≤–∏–¥–µ–æ (100% —Ä–∞–±–æ—Ç–∞–µ—Ç) ‚úÖ
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç: `KeepAwake.tsx`
- –ü—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç –º–∞–ª–µ–Ω—å–∫–æ–µ –±–µ–∑–∑–≤—É—á–Ω–æ–µ –≤–∏–¥–µ–æ (1x1 px) –≤ —Ü–∏–∫–ª–µ
- –ù–µ–≤–∏–¥–∏–º –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ **–í–°–ï–•** –≤–µ—Ä—Å–∏—è—Ö iOS
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –∏–∑ —Ñ–æ–Ω–∞

#### –ú–µ—Ç–æ–¥ B: Wake Lock API (–±–æ–Ω—É—Å) ‚úÖ
- –•—É–∫: `useWakeLock.ts`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π Screen Wake Lock API
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ iOS 16.4+ –∏ Android
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–æ–∑–≤—Ä–∞—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É

#### –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ (—Ç–æ–ª—å–∫–æ –≤ dev —Ä–µ–∂–∏–º–µ):
- `WakeLockIndicator.tsx` - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–µ–ª–µ–Ω—ã–π "üîí awake" –∫–æ–≥–¥–∞ lock –∞–∫—Ç–∏–≤–µ–Ω
- –í–∏–¥–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–∏ `NODE_ENV=development`
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –∑–∞–º–æ–∫–∞–Ω –≤ –≤–µ—Ä—Ö–Ω–µ–º –ª–µ–≤–æ–º —É–≥–ª—É

---

### 3. **–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç**

```
–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ (isWorkoutActive = true)
    ‚Üì
1. –ù–µ–≤–∏–¥–∏–º–æ–µ –≤–∏–¥–µ–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –ø—Ä–æ–∏–≥—Ä—ã–≤–∞—Ç—å—Å—è
    ‚Üì
2. Wake Lock API –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞—Ö–≤–∞—Ç–∏—Ç—å lock
    ‚Üì
3. –≠–∫—Ä–∞–Ω –ù–ï –ì–ê–°–ù–ï–¢ –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
    ‚Üì
4. –ü—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏/—Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏ - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í Development —Ä–µ–∂–∏–º–µ:
```bash
pnpm dev
```
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä Wake Lock –≤–∏–¥–µ–Ω –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É
- –ó–µ–ª–µ–Ω—ã–π "üîí awake" = –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ö—Ä–∞—Å–Ω—ã–π "üí§ sleep" = lock –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω (–ø—Ä–æ–≤–µ—Ä—å permissions)

### –í Production —Ä–µ–∂–∏–º–µ:
```bash
pnpm build
pnpm start
```
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ù–ï –≤–∏–¥–µ–Ω (—É–±—Ä–∞–Ω –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
- –≠–∫—Ä–∞–Ω –ø—Ä–æ—Å—Ç–æ –Ω–µ –≥–∞—Å–Ω–µ—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∑–∞–ª–µ:
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏ –∫–∞–∫ PWA (—á–µ—Ä–µ–∑ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω ¬´–î–æ–º–æ–π¬ª")
2. ‚úÖ –û—Ç–∫—Ä–æ–π —á–µ—Ä–µ–∑ –∏–∫–æ–Ω–∫—É –Ω–∞ –≥–ª–∞–≤–Ω–æ–º —ç–∫—Ä–∞–Ω–µ
3. ‚úÖ –ù–∞—á–Ω–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É
4. ‚úÖ –≠–∫—Ä–∞–Ω –ù–ï –¥–æ–ª–∂–µ–Ω –≥–∞—Å–Ω—É—Ç—å
5. ‚úÖ –ü–æ–ø—Ä–æ–±—É–π —Å–≤–µ—Ä–Ω—É—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è - –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–±–æ—Ç–∞—Ç—å

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
app/
  layout.tsx                      # PWA meta-—Ç–µ–≥–∏
  workout/[id]/
    page.tsx                      # –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç KeepAwake + WakeLockIndicator
    KeepAwake.tsx                 # –ù–µ–≤–∏–¥–∏–º–æ–µ –≤–∏–¥–µ–æ (–æ—Å–Ω–æ–≤–Ω–æ–π –º–µ—Ç–æ–¥)
    useWakeLock.ts                # Wake Lock API hook (–±–æ–Ω—É—Å)
    WakeLockIndicator.tsx         # –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ (dev only)

public/
  manifest.json                   # PWA –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
  icon-192.png                    # –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 192x192
  icon-512.png                    # –ò–∫–æ–Ω–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è 512x512
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏–∫–æ–Ω–æ–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–°–µ–π—á–∞—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è placeholder –∏–∫–æ–Ω–∫–∞. –î–ª—è –ª—É—á—à–µ–≥–æ –≤–∏–¥–∞:

1. –°–æ–∑–¥–∞–π –∏–∫–æ–Ω–∫—É 512x512px (—á–µ—Ä–Ω—ã–π —Ñ–æ–Ω, –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç "Jacked")
2. –°–æ—Ö—Ä–∞–Ω–∏ –∫–∞–∫ `public/icon-512.png`
3. –°–æ–∑–¥–∞–π –≤–µ—Ä—Å–∏—é 192x192 ‚Üí `public/icon-192.png`
4. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏ PWA –Ω–∞ iPhone

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∏–∫–æ–Ω–∫–∏:**
- –ö–≤–∞–¥—Ä–∞—Ç —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ —É–≥–ª–∞–º–∏
- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π –¥–∏–∑–∞–π–Ω
- –•–æ—Ä–æ—à–æ —á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞ –ª—é–±–æ–º —Ñ–æ–Ω–µ
- PNG —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –∏–ª–∏ —Å–ø–ª–æ—à–Ω—ã–º —Ñ–æ–Ω–æ–º

---

## üêõ Troubleshooting

### –≠–∫—Ä–∞–Ω –≤—Å–µ —Ä–∞–≤–Ω–æ –≥–∞—Å–Ω–µ—Ç:
1. ‚úÖ –£–±–µ–¥–∏—Å—å —á—Ç–æ –æ—Ç–∫—Ä—ã–ª —á–µ—Ä–µ–∑ PWA –∏–∫–æ–Ω–∫—É (–Ω–µ –±—Ä–∞—É–∑–µ—Ä)
2. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ iOS —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∞–≤—Ç–æ–≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
3. ‚úÖ –í dev —Ä–µ–∂–∏–º–µ –ø–æ—Å–º–æ—Ç—Ä–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä - –∑–µ–ª–µ–Ω—ã–π –ª–∏ –æ–Ω?
4. ‚úÖ –ü—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ iOS: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –≠–∫—Ä–∞–Ω –∏ —è—Ä–∫–æ—Å—Ç—å ‚Üí –ê–≤—Ç–æ–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ (–Ω–µ –¥–æ–ª–∂–Ω–∞ –≤–ª–∏—è—Ç—å)

### PWA –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ Safari:
- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏ PWA: —É–¥–∞–ª–∏ —Å –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞ –∏ –¥–æ–±–∞–≤—å –∑–∞–Ω–æ–≤–æ
- –£–±–µ–¥–∏—Å—å —á—Ç–æ –æ—Ç–∫—Ä—ã–≤–∞–µ—à—å —á–µ—Ä–µ–∑ –ò–ö–û–ù–ö–£, –∞ –Ω–µ –∑–∞–∫–ª–∞–¥–∫—É

### –í–∏–¥–µ–æ –Ω–µ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç—Å—è:
- –ü–µ—Ä–≤—ã–π —Ç–∞–ø –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å (iOS –ø–æ–ª–∏—Ç–∏–∫–∞)
- –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (tap –Ω–∞ –∫–Ω–æ–ø–∫—É) –≤–∏–¥–µ–æ –¥–æ–ª–∂–Ω–æ —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å
- –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### PWA:
- ‚úÖ Fullscreen (–Ω–µ—Ç –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ —Å –≥–ª–∞–≤–Ω–æ–≥–æ —ç–∫—Ä–∞–Ω–∞
- ‚úÖ –ù–∞—Ç–∏–≤–Ω—ã–π –≤–∏–¥
- ‚úÖ –û—Ñ–ª–∞–π–Ω —Ä–∞–±–æ—Ç–∞ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Service Worker)

### Screen Wake Lock:
- ‚úÖ –≠–∫—Ä–∞–Ω –Ω–µ –≥–∞—Å–Ω–µ—Ç –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- ‚úÖ –¢–∞–π–º–µ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ—á–Ω–æ
- ‚úÖ –ù–µ –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ç—Ä–æ–≥–∞—Ç—å —ç–∫—Ä–∞–Ω
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π (–≤–∏–¥–µ–æ-–º–µ—Ç–æ–¥)

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **Service Worker** - –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–∞
2. **Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞—Ö
3. **Background Sync** - —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ–Ω–µ
4. **–õ—É—á—à–∏–µ –∏–∫–æ–Ω–∫–∏** - –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω
5. **Splash screen** - —ç–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ PWA

---

–ì–æ—Ç–æ–≤–æ! üéâ –¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –Ω–∞—Ç–∏–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π —á—Ç–æ —ç–∫—Ä–∞–Ω –Ω–µ –≥–∞—Å–Ω–µ—Ç –≤–æ –≤—Ä–µ–º—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.

